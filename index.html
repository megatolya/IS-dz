<!doctype html>
<html>
<head>
	<title>Информационная Безопасность</title>
	<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
</head>
<body>
	<script src="jq.js"></script>
	<script>
	$.fn.serializeObject = function () {
    var o = {};
    var a = this.serializeArray();
    $.each(a, function () {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
}	;

function getLowestNumbers (obj){
	var min = obj[0].ver;
	var id = 0;
	var id2 = 0;

	$(obj).each(function(key, v) {
		if (min > v.ver) {
			min = v.ver;
			id = key;
		}
	});
	min = obj[0].ver;
	var newArr = obj;
	min = newArr[0].ver;
		
	$(newArr).each(function(key, v) {
		if (min > v.ver && key!=id) {
			min = v.ver;
			id2 = key;
		}
	});
	return [id,id2];
}
//проверяет остались ли числа не входящие в граф
function checkNumbers(numbers) {
	found = false;
	$.each(numbers, function(k, v) {
		if(!(v instanceof Graph))
			found = true;
	})
	return found;
}
/**
*mins = two numbers
*link to next graph
*/
function Graph(mins, numbers) {
	this.num1 = numbers[mins[0]].num;
	this.num2 = numbers[mins[1]].num;
	console.log(this.num2 instanceof Graph);
	this.ver  = parseFloat(numbers[mins[0]].ver) + parseFloat(numbers[mins[1]].ver);
}
var numbers = new Array();
function makeGraphs(numbers, graphs) {
	var mins = getLowestNumbers(numbers);
	var graph = new Graph(mins, numbers);
	numbers.splice(mins[0],1);
	numbers.splice(mins[1],1);
	numbers.push(graph);
	if(checkNumbers(numbers)) {
		console.log(numbers);
		console.log(getLowestNumbers(numbers));

	}
}
	$(function(){
		var a = $('form').serializeObject();
		numbers = new Array();
		$.each(a.val, function(k, v) {
			numbers[k] = {};
			numbers[k].ver = a['val'][k];
			numbers[k].num = a['var'][k];
		});

		makeGraphs(numbers);	

		$('button').click(function() {
			return false;
		});
	});
	</script>
	<style>
		.result__textarea{
			width: 100%;
			height: 300px;
		}
		input[type="text"]{
			margin: 0;
		}
		.row{
			margin: 10px 0;
		}
	</style>
	<div class="container">
		<h3>Выполнили:</h3>
		<ul>
			<li>Островский А. Л.</li>
			<li>Стамболишвили Д. А.</li>
			<li>Лапшина Е. А.</li>
		</ul>
		<form>
			<div class="row">
				<input class="span1" type="text" value="1" name="var">
				<input class="span1" type="text" value="0.05" name="val">
				<button class="add btn">+</button>
				<button class="add btn">-</button>
			</div>
			<div class="row">
				<input class="span1" type="text" value="2" name="var">
				<input class="span1" type="text" value="0.06" name="val">
				<button class="add btn">+</button>
				<button class="add btn">-</button>
			</div>
			<div class="row">
				<input class="span1" type="text"  value="3" name="var">
				<input class="span1" type="text" value="0.02" name="val">
				<button class="add btn">+</button>
				<button class="add btn">-</button>
			</div>
			<div class="row">
				<input class="span1" type="text"  value="4" name="var">
				<input class="span1" type="text" value="0.08" name="val">
				<button class="add btn">+</button>
				<button class="add btn">-</button>
			</div>
			<div class="row">
				<input class="span1" type="text"  value="5" name="var">
				<input class="span1" type="text" value="0.01" name="val">
				<button class="add btn">+</button>
				<button class="add btn">-</button>
			</div>
		</form>
		<div class="result row">
			<textarea class="result__textarea"></textarea>
		</div>
		<a href="asdas" class="btn" onclick="alert(':-)');">Сделать круто!</a>
	</div>
	
	
	<script src="bootstrap/js/bootstrap.min.js"></script>
</body>
</html>